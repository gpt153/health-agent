/home/samuel/workspace/health-agent/src/handlers/sleep_quiz.py:521: PTBUserWarning: If 'per_message=False', 'CallbackQueryHandler' will not be tracked for every message. Read this FAQ entry to learn more about the per_* settings: https://github.com/python-telegram-bot/python-telegram-bot/wiki/Frequently-Asked-Questions#what-do-the-per_-settings-in-conversationhandler-do.
  sleep_quiz_handler = ConversationHandler(
2025-12-17 21:47:31,612 - __main__ - INFO - Validating configuration...
2025-12-17 21:47:31,612 - __main__ - INFO - Initializing database connection pool...
2025-12-17 21:47:31,612 - src.db.connection - INFO - Initializing database connection pool
2025-12-17 21:47:31,613 - __main__ - INFO - Loading dynamic tools...
2025-12-17 21:47:31,650 - src.agent.dynamic_tools - INFO - Loaded dynamic tool: calculate_total_calories_and_macros_for_the_curren
2025-12-17 21:47:31,650 - __main__ - INFO - Loaded 1 dynamic tools: calculate_total_calories_and_macros_for_the_curren
2025-12-17 21:47:31,650 - __main__ - INFO - Starting Telegram bot...
2025-12-17 21:47:31,667 - src.bot - INFO - ReminderManager initialized
2025-12-17 21:47:31,667 - src.bot - INFO - Sleep quiz handler registered
2025-12-17 21:47:31,667 - src.bot - INFO - Reminder completion handler registered
2025-12-17 21:47:31,668 - src.bot - INFO - Bot application created
2025-12-17 21:47:31,668 - __main__ - INFO - Bot is running. Press Ctrl+C to stop.
2025-12-17 21:47:31,763 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8427543680:AAH-lmx5BT2ASx8T_d2GOvv83dPXtnhxJo0/getMe "HTTP/1.1 200 OK"
2025-12-17 21:47:31,764 - apscheduler.scheduler - INFO - Scheduler started
2025-12-17 21:47:31,764 - telegram.ext.Application - INFO - Application started
2025-12-17 21:47:31,764 - __main__ - INFO - Loading reminders from database...
2025-12-17 21:47:31,764 - src.scheduler.reminder_manager - INFO - Loading reminders from database...
2025-12-17 21:47:31,768 - src.scheduler.reminder_manager - INFO - Loaded and scheduled 0 reminders from database
2025-12-17 21:47:31,800 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8427543680:AAH-lmx5BT2ASx8T_d2GOvv83dPXtnhxJo0/deleteWebhook "HTTP/1.1 200 OK"
2025-12-17 21:47:35,935 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8427543680:AAH-lmx5BT2ASx8T_d2GOvv83dPXtnhxJo0/getUpdates "HTTP/1.1 409 Conflict"
2025-12-17 21:47:35,935 - telegram.ext.Updater - ERROR - Exception happened while polling for updates.
Traceback (most recent call last):
  File "/home/samuel/workspace/health-agent/.venv/lib/python3.13/site-packages/telegram/ext/_utils/networkloop.py", line 134, in network_retry_loop
    await do_action()
  File "/home/samuel/workspace/health-agent/.venv/lib/python3.13/site-packages/telegram/ext/_utils/networkloop.py", line 127, in do_action
    action_cb_task.result()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "/home/samuel/workspace/health-agent/.venv/lib/python3.13/site-packages/telegram/ext/_updater.py", line 340, in polling_action_cb
    updates = await self.bot.get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/home/samuel/workspace/health-agent/.venv/lib/python3.13/site-packages/telegram/ext/_extbot.py", line 676, in get_updates
    updates = await super().get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "/home/samuel/workspace/health-agent/.venv/lib/python3.13/site-packages/telegram/_bot.py", line 4780, in get_updates
    await self._post(
    ^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    ),
    ^
  File "/home/samuel/workspace/health-agent/.venv/lib/python3.13/site-packages/telegram/_bot.py", line 703, in _post
    return await self._do_post(
           ^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/home/samuel/workspace/health-agent/.venv/lib/python3.13/site-packages/telegram/ext/_extbot.py", line 372, in _do_post
    return await super()._do_post(
           ^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/home/samuel/workspace/health-agent/.venv/lib/python3.13/site-packages/telegram/_bot.py", line 732, in _do_post
    result = await request.post(
             ^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/home/samuel/workspace/health-agent/.venv/lib/python3.13/site-packages/telegram/request/_baserequest.py", line 198, in post
    result = await self._request_wrapper(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "/home/samuel/workspace/health-agent/.venv/lib/python3.13/site-packages/telegram/request/_baserequest.py", line 375, in _request_wrapper
    raise exception
telegram.error.Conflict: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-12-17 21:47:41,511 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8427543680:AAH-lmx5BT2ASx8T_d2GOvv83dPXtnhxJo0/getUpdates "HTTP/1.1 409 Conflict"
2025-12-17 21:47:41,512 - telegram.ext.Updater - ERROR - Exception happened while polling for updates.
Traceback (most recent call last):
  File "/home/samuel/workspace/health-agent/.venv/lib/python3.13/site-packages/telegram/ext/_utils/networkloop.py", line 134, in network_retry_loop
    await do_action()
  File "/home/samuel/workspace/health-agent/.venv/lib/python3.13/site-packages/telegram/ext/_utils/networkloop.py", line 127, in do_action
    action_cb_task.result()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "/home/samuel/workspace/health-agent/.venv/lib/python3.13/site-packages/telegram/ext/_updater.py", line 340, in polling_action_cb
    updates = await self.bot.get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/home/samuel/workspace/health-agent/.venv/lib/python3.13/site-packages/telegram/ext/_extbot.py", line 676, in get_updates
    updates = await super().get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "/home/samuel/workspace/health-agent/.venv/lib/python3.13/site-packages/telegram/_bot.py", line 4780, in get_updates
    await self._post(
    ^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    ),
    ^
  File "/home/samuel/workspace/health-agent/.venv/lib/python3.13/site-packages/telegram/_bot.py", line 703, in _post
    return await self._do_post(
           ^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/home/samuel/workspace/health-agent/.venv/lib/python3.13/site-packages/telegram/ext/_extbot.py", line 372, in _do_post
    return await super()._do_post(
           ^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/home/samuel/workspace/health-agent/.venv/lib/python3.13/site-packages/telegram/_bot.py", line 732, in _do_post
    result = await request.post(
             ^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/home/samuel/workspace/health-agent/.venv/lib/python3.13/site-packages/telegram/request/_baserequest.py", line 198, in post
    result = await self._request_wrapper(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "/home/samuel/workspace/health-agent/.venv/lib/python3.13/site-packages/telegram/request/_baserequest.py", line 375, in _request_wrapper
    raise exception
telegram.error.Conflict: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-12-17 21:47:48,334 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8427543680:AAH-lmx5BT2ASx8T_d2GOvv83dPXtnhxJo0/getUpdates "HTTP/1.1 409 Conflict"
2025-12-17 21:47:48,335 - telegram.ext.Updater - ERROR - Exception happened while polling for updates.
Traceback (most recent call last):
  File "/home/samuel/workspace/health-agent/.venv/lib/python3.13/site-packages/telegram/ext/_utils/networkloop.py", line 134, in network_retry_loop
    await do_action()
  File "/home/samuel/workspace/health-agent/.venv/lib/python3.13/site-packages/telegram/ext/_utils/networkloop.py", line 127, in do_action
    action_cb_task.result()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "/home/samuel/workspace/health-agent/.venv/lib/python3.13/site-packages/telegram/ext/_updater.py", line 340, in polling_action_cb
    updates = await self.bot.get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/home/samuel/workspace/health-agent/.venv/lib/python3.13/site-packages/telegram/ext/_extbot.py", line 676, in get_updates
    updates = await super().get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "/home/samuel/workspace/health-agent/.venv/lib/python3.13/site-packages/telegram/_bot.py", line 4780, in get_updates
    await self._post(
    ^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    ),
    ^
  File "/home/samuel/workspace/health-agent/.venv/lib/python3.13/site-packages/telegram/_bot.py", line 703, in _post
    return await self._do_post(
           ^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/home/samuel/workspace/health-agent/.venv/lib/python3.13/site-packages/telegram/ext/_extbot.py", line 372, in _do_post
    return await super()._do_post(
           ^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/home/samuel/workspace/health-agent/.venv/lib/python3.13/site-packages/telegram/_bot.py", line 732, in _do_post
    result = await request.post(
             ^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/home/samuel/workspace/health-agent/.venv/lib/python3.13/site-packages/telegram/request/_baserequest.py", line 198, in post
    result = await self._request_wrapper(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "/home/samuel/workspace/health-agent/.venv/lib/python3.13/site-packages/telegram/request/_baserequest.py", line 375, in _request_wrapper
    raise exception
telegram.error.Conflict: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-12-17 21:47:54,032 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8427543680:AAH-lmx5BT2ASx8T_d2GOvv83dPXtnhxJo0/getUpdates "HTTP/1.1 409 Conflict"
2025-12-17 21:47:54,033 - telegram.ext.Updater - ERROR - Exception happened while polling for updates.
Traceback (most recent call last):
  File "/home/samuel/workspace/health-agent/.venv/lib/python3.13/site-packages/telegram/ext/_utils/networkloop.py", line 134, in network_retry_loop
    await do_action()
  File "/home/samuel/workspace/health-agent/.venv/lib/python3.13/site-packages/telegram/ext/_utils/networkloop.py", line 127, in do_action
    action_cb_task.result()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "/home/samuel/workspace/health-agent/.venv/lib/python3.13/site-packages/telegram/ext/_updater.py", line 340, in polling_action_cb
    updates = await self.bot.get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/home/samuel/workspace/health-agent/.venv/lib/python3.13/site-packages/telegram/ext/_extbot.py", line 676, in get_updates
    updates = await super().get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "/home/samuel/workspace/health-agent/.venv/lib/python3.13/site-packages/telegram/_bot.py", line 4780, in get_updates
    await self._post(
    ^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    ),
    ^
  File "/home/samuel/workspace/health-agent/.venv/lib/python3.13/site-packages/telegram/_bot.py", line 703, in _post
    return await self._do_post(
           ^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/home/samuel/workspace/health-agent/.venv/lib/python3.13/site-packages/telegram/ext/_extbot.py", line 372, in _do_post
    return await super()._do_post(
           ^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/home/samuel/workspace/health-agent/.venv/lib/python3.13/site-packages/telegram/_bot.py", line 732, in _do_post
    result = await request.post(
             ^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/home/samuel/workspace/health-agent/.venv/lib/python3.13/site-packages/telegram/request/_baserequest.py", line 198, in post
    result = await self._request_wrapper(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "/home/samuel/workspace/health-agent/.venv/lib/python3.13/site-packages/telegram/request/_baserequest.py", line 375, in _request_wrapper
    raise exception
telegram.error.Conflict: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-12-17 21:48:02,601 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8427543680:AAH-lmx5BT2ASx8T_d2GOvv83dPXtnhxJo0/getUpdates "HTTP/1.1 409 Conflict"
2025-12-17 21:48:02,602 - telegram.ext.Updater - ERROR - Exception happened while polling for updates.
Traceback (most recent call last):
  File "/home/samuel/workspace/health-agent/.venv/lib/python3.13/site-packages/telegram/ext/_utils/networkloop.py", line 134, in network_retry_loop
    await do_action()
  File "/home/samuel/workspace/health-agent/.venv/lib/python3.13/site-packages/telegram/ext/_utils/networkloop.py", line 127, in do_action
    action_cb_task.result()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "/home/samuel/workspace/health-agent/.venv/lib/python3.13/site-packages/telegram/ext/_updater.py", line 340, in polling_action_cb
    updates = await self.bot.get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/home/samuel/workspace/health-agent/.venv/lib/python3.13/site-packages/telegram/ext/_extbot.py", line 676, in get_updates
    updates = await super().get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "/home/samuel/workspace/health-agent/.venv/lib/python3.13/site-packages/telegram/_bot.py", line 4780, in get_updates
    await self._post(
    ^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    ),
    ^
  File "/home/samuel/workspace/health-agent/.venv/lib/python3.13/site-packages/telegram/_bot.py", line 703, in _post
    return await self._do_post(
           ^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/home/samuel/workspace/health-agent/.venv/lib/python3.13/site-packages/telegram/ext/_extbot.py", line 372, in _do_post
    return await super()._do_post(
           ^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/home/samuel/workspace/health-agent/.venv/lib/python3.13/site-packages/telegram/_bot.py", line 732, in _do_post
    result = await request.post(
             ^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/home/samuel/workspace/health-agent/.venv/lib/python3.13/site-packages/telegram/request/_baserequest.py", line 198, in post
    result = await self._request_wrapper(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "/home/samuel/workspace/health-agent/.venv/lib/python3.13/site-packages/telegram/request/_baserequest.py", line 375, in _request_wrapper
    raise exception
telegram.error.Conflict: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
